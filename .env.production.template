# Production Environment Variables
# These are configured in Render Dashboard
# This file documents what needs to be set

# ============================================
# BACKEND SERVICE ENVIRONMENT VARIABLES
# ============================================

# Application
NODE_ENV=production
PORT=4000
LOG_LEVEL=info

# Database (automatically populated by Render)
DATABASE_URL=${training1-db.connectionString}

# Redis (automatically populated by Render)
REDIS_URL=${training1-redis.connectionString}

# REQUIRED: AWS S3 or Compatible Storage
S3_ENDPOINT=https://s3.amazonaws.com
S3_ACCESS_KEY=<SET_IN_RENDER_DASHBOARD>
S3_SECRET_KEY=<SET_IN_RENDER_DASHBOARD>
S3_BUCKET=training1-production
S3_REGION=us-east-1

# REQUIRED: CORS Configuration
CORS_ORIGIN_FRONTEND=https://training1.onrender.com

# REQUIRED: Authentication Secrets (auto-generated by Render)
JWT_SECRET=${auto-generated}
JWT_EXPIRES_IN=7d
SESSION_SECRET=${auto-generated}

# REQUIRED: OAuth Providers
OIDC_GOOGLE_CLIENT_ID=<SET_IN_RENDER_DASHBOARD>
OIDC_GOOGLE_CLIENT_SECRET=<SET_IN_RENDER_DASHBOARD>
OIDC_MICROSOFT_CLIENT_ID=<SET_IN_RENDER_DASHBOARD>
OIDC_MICROSOFT_CLIENT_SECRET=<SET_IN_RENDER_DASHBOARD>
OIDC_REDIRECT_URI=https://your-backend.onrender.com/v1/auth/callback/oidc

# REQUIRED: Email Service (SendGrid, Mailgun, AWS SES)
SMTP_URL=<SET_IN_RENDER_DASHBOARD>
SMTP_FROM=noreply@yourdomain.com

# OPTIONAL: SMS (Twilio)
TWILIO_ACCOUNT_SID=<SET_IN_RENDER_DASHBOARD>
TWILIO_AUTH_TOKEN=<SET_IN_RENDER_DASHBOARD>
TWILIO_PHONE_NUMBER=<SET_IN_RENDER_DASHBOARD>

# REQUIRED: Payment (Stripe)
STRIPE_SECRET_KEY=<SET_IN_RENDER_DASHBOARD>
STRIPE_WEBHOOK_SECRET=<SET_IN_RENDER_DASHBOARD>
STRIPE_PUBLISHABLE_KEY=<SET_IN_RENDER_DASHBOARD>

# REQUIRED: Search (Typesense)
TYPESENSE_HOST=${training1-search.host}
TYPESENSE_PORT=443
TYPESENSE_PROTOCOL=https
TYPESENSE_API_KEY=${training1-search.TYPESENSE_API_KEY}

# OPTIONAL: Video Processing
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe

# OPTIONAL: AI Services
ELEVENLABS_API_KEY=<SET_IN_RENDER_DASHBOARD>
OPENAI_API_KEY=<SET_IN_RENDER_DASHBOARD>

# Feature Flags
ENABLE_ANALYTICS=true
ENABLE_LIVE_SESSIONS=true
ENABLE_PROCTORING=true

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000

# ============================================
# FRONTEND SERVICE ENVIRONMENT VARIABLES
# ============================================

# API Backend (automatically populated)
NEXT_PUBLIC_API_URL=https://${training1-backend.host}
NEXT_PUBLIC_WS_URL=wss://${training1-backend.host}

# Application
NEXT_PUBLIC_APP_NAME=Training1
NEXT_PUBLIC_APP_URL=https://training1.onrender.com

# Authentication
NEXTAUTH_URL=https://training1.onrender.com
NEXTAUTH_SECRET=${auto-generated}

# REQUIRED: OAuth (same as backend)
GOOGLE_CLIENT_ID=<SET_IN_RENDER_DASHBOARD>
GOOGLE_CLIENT_SECRET=<SET_IN_RENDER_DASHBOARD>
MICROSOFT_CLIENT_ID=<SET_IN_RENDER_DASHBOARD>
MICROSOFT_CLIENT_SECRET=<SET_IN_RENDER_DASHBOARD>

# REQUIRED: Stripe (public key)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=<SET_IN_RENDER_DASHBOARD>

# OPTIONAL: Analytics
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=<SET_IN_RENDER_DASHBOARD>
NEXT_PUBLIC_POSTHOG_KEY=<SET_IN_RENDER_DASHBOARD>
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# CDN
NEXT_PUBLIC_CDN_URL=https://training1-production.s3.amazonaws.com

# Feature Flags
NEXT_PUBLIC_ENABLE_LIVE_SESSIONS=true
NEXT_PUBLIC_ENABLE_PROCTORING=true
NEXT_PUBLIC_ENABLE_SOCIAL_AUTH=true

# WebRTC
NEXT_PUBLIC_STUN_SERVER=stun:stun.l.google.com:19302

# ============================================
# SETUP INSTRUCTIONS
# ============================================

# 1. Create services on Render using render.yaml
# 2. In each service settings, add environment variables marked with <SET_IN_RENDER_DASHBOARD>
# 3. Variables marked ${auto-generated} will be created by Render
# 4. Variables with ${service-name.property} are automatically populated from other services
